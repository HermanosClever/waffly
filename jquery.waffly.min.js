(function(e){e.fn.waffly=function(t){var n,r,i,s,o=e.extend({class_name:"waffly",style_override:!1,default_color:"#ddd",graph_font:"arial, sans-serif",graph_title_color:"#05c",graph_color:"#05c",graph_value:"80%",graph_class:"sel",total_dots:100,graph_width:900,dot_row:10,dot_gap:4,dot_radius:"0%"},t);this.each(function(){if(e(this).data("waffly-value")){o.graph_value=e(this).data("waffly-value").replace(",",".");r=o.graph_value.split(".");console.log(r);r[1].length>2&&(o.graph_value=o.graph_value)}n='<div class="'+o.class_name+'" style="font-family:'+o.graph_font+";width:"+o.graph_width+'px;" title="'+e(this).text()+'">';e(this).data("waffly-value")&&(n+='<div class="waffly_value" style="font-size:2.65em;font-weight:bold;margin:1em 0 .5em;text-align:center">'+e(this).data("waffly-value")+"</div>");s=Math.floor((o.graph_width-(o.dot_row-1)*o.dot_gap)/o.dot_row);n+='<ul class="waffly_dots" style="font-size:0;list-style:none;margin:0;padding:0;">';i="";i+="border-radius:"+o.dot_radius+";";i+="display:inline-block;";i+="height:"+s+"px;";i+="margin:0 "+o.dot_gap+"px "+o.dot_gap+"px 0;";i+="width:"+s+"px;";for(var t=0;t<o.total_dots;t++)t<parseFloat(o.graph_value)?n+='<li class="waffly_dot d'+(t+1)+" "+o.graph_class+'" style="background:'+o.graph_color+";"+i+'"></li>':n+='<li class="waffly_dot d'+(t+1)+'" style="background:'+o.default_color+";"+i+'"></li>';n+="</ul>";e(this).data("waffly-title")&&(n+='<div class="waffly_title" style="margin-top:.5em;text-align:center">'+e(this).data("waffly-title")+"</div>");n+="</div>";e(this).html(n)});return this}})(jQuery);